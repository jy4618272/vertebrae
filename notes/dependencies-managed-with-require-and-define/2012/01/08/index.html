
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dependencies managed with require() and define() - Vertebrae framework</title>
  <meta name="author" content="Bill Heaton">

  
  <meta name="description" content="Modular Code Dependencies RequireJS and AMD (Asynchronous Module Definition) provide a pattern for authoring modular code and also managing &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pixelhandler.github.com/vertebrae http://pixelhandler.github.com/vertebrae/notes/dependencies-managed-with-require-and-define/2012/01/08">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Vertebrae framework" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Vertebrae framework</a></h1>
  
    <h2>built with Backbone.js and RequireJS using AMD</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pixelhandler.github.com/vertebrae pixelhandler.github.com/vertebrae" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Dependencies Managed With Require() and Define()</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-08T15:11:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Modular Code Dependencies</h2>

<p>RequireJS and AMD (Asynchronous Module Definition) provide a pattern for authoring modular code and also managing dependencies without complex namespacing or even adding any properties to the (head) window object. When we write modules in JavaScript, we want to handle the reuse of code intelligently and have the option to build an entire application into a single script or load modules as they are required to execute the business requirements of the application.</p>

<ul>
<li><a href="http://requirejs.org/docs/requirements.html" title="RequireJS is designed to meet these requirements">RequireJS Requirements/Design</a></li>
<li><a href="https://github.com/jrburke/requirejs" title="requirejs on github">RequireJS Source</a></li>
<li><a href="http://requirejs.org/docs/whyamd.html" title="AMD benefits">Why AMD</a></li>
</ul>


<h3>Writing AMD modules with RequireJS</h3>

<p><em>Note - This section &#8220;Writing AMD modules with RequireJS&#8221; is an excerpt from <a href="https://github.com/addyosmani/backbone-fundamentals#modularjs" title="Backbone Fundamentals online book project by addyosmani">Backbone Fundamentals</a></em></p>

<p>The overall goal for the AMD format is to provide a solution for modular JavaScript that developers can use today. The two key concepts you need to be aware of when using it with a script-loader are a <code>define()</code> method for facilitating module definition and a <code>require()</code> method for handling dependency loading. <code>define()</code> is used to define named or unnamed modules based on the proposal using the following signature:</p>

<!--more-->




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">define</span><span class="p">(</span>
</span><span class='line'>    <span class="nx">module_id</span> <span class="cm">/*optional*/</span><span class="p">,</span>
</span><span class='line'>    <span class="p">[</span><span class="nx">dependencies</span><span class="p">]</span> <span class="cm">/*optional*/</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">definition</span> <span class="kd">function</span> <span class="cm">/*function for instantiating the module or object*/</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can tell by the inline comments, the <code>module_id</code> is an optional argument which is typically only required when non-AMD concatenation tools are being used (there may be some other edge cases where it&#8217;s useful too). When this argument is left out, we call the module &#8216;anonymous&#8217;. When working with anonymous modules, the idea of a module&#8217;s identity is DRY, making it trivial to avoid duplication of filenames and code.</p>

<p>Back to the define signature, the dependencies argument represents an array of dependencies which are required by the module you are defining and the third argument (&#8216;definition function&#8217;) is a function that&#8217;s executed to instantiate your module. A barebone module (compatible with RequireJS) could be defined using <code>define()</code> as follows:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// A module ID has been omitted here to make the module anonymous</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="c1">// module definition function</span>
</span><span class='line'>    <span class="c1">// dependencies (foo and bar) are mapped to function parameters</span>
</span><span class='line'>    <span class="kd">function</span> <span class="p">(</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// return a value that defines the module export</span>
</span><span class='line'>        <span class="c1">// (i.e the functionality we want to expose for consumption)</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// create your module here</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">doStuff</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Yay! Stuff&#39;</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nx">myModule</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>The main.js file bootstraps the Web application</h3>

<figure class='code'><figcaption><span> (main.js)</span> <a href='/downloads/code/javascript/main.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// main.js</span>
</span><span class='line'><span class="c1">// ------- </span>
</span><span class='line'><span class="c1">// See require.js, underscore.js, backbone.js</span>
</span><span class='line'><span class="c1">// Requires `require`, `define`</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">HL</span><span class="p">)</span> <span class="p">{</span> <span class="kd">var</span> <span class="nx">HL</span> <span class="o">=</span> <span class="p">{};</span> <span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">HL</span><span class="p">.</span><span class="nx">buildVersion</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">HL</span><span class="p">.</span><span class="nx">buildVersion</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Param (string) str is a path beginning with &#39;/&#39; (src directory)</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nx">HL</span><span class="p">.</span><span class="nx">buildVersion</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">path</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">buildVersion</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">require</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">baseUrl</span><span class="o">:</span> <span class="s1">&#39;./&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">locale</span><span class="o">:</span> <span class="s1">&#39;en-us&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">paths</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ** Libraries **</span>
</span><span class='line'>        <span class="s1">&#39;json2&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/json2.min&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;modernizr&#39;</span>    <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/modernizr.min&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;requirejquery&#39;</span><span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/require-jquery&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;jquery&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/jquery-1.7.2.min&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;zepto&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/zepto&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;underscore&#39;</span>   <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/underscore&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;mustache&#39;</span>     <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/mustache&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;backbone&#39;</span>     <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/backbone&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// r.js plugins</span>
</span><span class='line'>        <span class="s1">&#39;use&#39;</span>          <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/use&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;domready&#39;</span>     <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/domReady&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;order&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/order&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;text&#39;</span>         <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/text&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// jQuery plugins should be loaded in the facade.js file</span>
</span><span class='line'>        <span class="s1">&#39;jquerycookie&#39;</span> <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/jquery.cookie&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Zepto plugins should be loaded in the facade.js file</span>
</span><span class='line'>        <span class="c1">// these need the following order! type, callbacks, deferred</span>
</span><span class='line'>        <span class="s1">&#39;type&#39;</span>         <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/type&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;callbacks&#39;</span>    <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/callbacks&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;deferred&#39;</span>     <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/deferred&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Touch events</span>
</span><span class='line'>        <span class="s1">&#39;touch&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor/plugins/touch&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Facade references to vendor / library methods</span>
</span><span class='line'>        <span class="s1">&#39;facade&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/facade&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Vendor libs and plugin, packaged group of common dependencies</span>
</span><span class='line'>        <span class="s1">&#39;vendor&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/vendor&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Utilities, Mixins and HauteLook libraries</span>
</span><span class='line'>        <span class="s1">&#39;utils&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/utils&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// (Backbone) Syncs depend on both vendor and utils</span>
</span><span class='line'>        <span class="s1">&#39;syncs&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/syncs&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Should be used as required dependencies with use of `define`, </span>
</span><span class='line'>        <span class="s1">&#39;models&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/models&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;views&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/views&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;collections&#39;</span>  <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/collections&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;controller&#39;</span>   <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/controller&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ** Packages **</span>
</span><span class='line'>
</span><span class='line'>        <span class="s1">&#39;chrome&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/packages/chrome&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;events&#39;</span>       <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/packages/events&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;catalog&#39;</span>      <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/packages/catalog&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;product&#39;</span>      <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/packages/product&#39;</span><span class="p">),</span>
</span><span class='line'>        <span class="s1">&#39;hello&#39;</span>        <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/packages/hello&#39;</span><span class="p">),</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ** Application ** bootstrap for frontend app </span>
</span><span class='line'>        <span class="s1">&#39;application&#39;</span>  <span class="o">:</span> <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s1">&#39;/application&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">use</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;underscore&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">attach</span><span class="o">:</span> <span class="s2">&quot;_&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="s2">&quot;backbone&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">deps</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;use!underscore&quot;</span><span class="p">,</span> <span class="s2">&quot;jquery&quot;</span><span class="p">],</span>
</span><span class='line'>            <span class="nx">attach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="nx">Backbone</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">priority</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="s1">&#39;modernizr&#39;</span><span class="p">,</span> <span class="s1">&#39;json2&#39;</span><span class="p">,</span> <span class="s1">&#39;vendor&#39;</span><span class="p">,</span> <span class="s1">&#39;utils&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nx">jquery</span><span class="o">:</span> <span class="s1">&#39;1.7.2&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">waitSeconds</span><span class="o">:</span> <span class="mi">33</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nx">require</span><span class="p">([</span><span class="s1">&#39;facade&#39;</span><span class="p">,</span> <span class="s1">&#39;application&#39;</span><span class="p">,</span> <span class="s1">&#39;utils&#39;</span><span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">facade</span><span class="p">,</span>   <span class="nx">App</span><span class="p">,</span>           <span class="nx">utils</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">facade</span><span class="p">.</span><span class="nx">$</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">facade</span><span class="p">.</span><span class="nx">Backbone</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">Channel</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">baselib</span><span class="p">.</span><span class="nx">Channel</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">debug</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">debug</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">cssArr</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>            <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s2">&quot;/css/base.css&quot;</span><span class="p">),</span>
</span><span class='line'>            <span class="nx">HL</span><span class="p">.</span><span class="nx">prependBuild</span><span class="p">(</span><span class="s2">&quot;/css/global.css&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// load style sheets</span>
</span><span class='line'>    <span class="nx">Channel</span><span class="p">(</span><span class="s1">&#39;load:css&#39;</span><span class="p">).</span><span class="nx">publish</span><span class="p">(</span><span class="nx">cssArr</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="c1">// doc ready</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">app</span><span class="p">;</span>
</span><span class='line'>        <span class="c1">// run the application, it all starts here.</span>
</span><span class='line'>        <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;initialize application...&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">();</span>
</span><span class='line'>        <span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span><span class="nx">pushState</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</span><span class='line'>        <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;...app router active&quot;</span><span class="p">,</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example of Backbone.js Model definition using AMD</h3>

<p>Below is an example of defining a Backbone Model object which returns a constructor rather than an instance. The recommended convention for naming variables is to use <em>Upper</em> <em>CamelCase</em> for constructors and <em>lower</em> <em>camelCase</em> for others.</p>

<figure class='code'><figcaption><span> (event.js)</span> <a href='/downloads/code/javascript/models/event.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Event Model</span>
</span><span class='line'><span class="c1">// -----------</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Requires define</span>
</span><span class='line'><span class="c1">// Return {Event} constructor</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;models/base&#39;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">BaseModel</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">Event</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">Event</span> <span class="o">=</span> <span class="nx">BaseModel</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">defaults</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// v4 (JSON HAL) Events format...</span>
</span><span class='line'>            <span class="s2">&quot;_links&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;self&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="s2">&quot;http://hautelook.com/rels/catalog&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="s2">&quot;http://hautelook.com/rels/availability&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="s2">&quot;http://hautelook.com/rels/images/event-hero&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="s2">&quot;http://hautelook.com/rels/images/seals/event-hero&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>                <span class="s2">&quot;http://hautelook.com/rels/images/seals/catalog-banner&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="kc">null</span>
</span><span class='line'>                <span class="p">},</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;13454&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;Pour La Victoire&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;start_date&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;2012-02-01 08:00:00&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;end_date&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;2012-02-03 08:00:00&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;tagline&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;Fashionable platform pumps and ballet flats&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;active&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;visibility&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;public&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;sale_type&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//&quot;default&quot;,</span>
</span><span class='line'>            <span class="s2">&quot;verticals&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">&quot;vertical&quot;</span><span class="o">:</span> <span class="kc">null</span> <span class="cm">/* &quot;Women&quot; */</span> <span class="p">}</span> <span class="p">],</span>
</span><span class='line'>            <span class="s2">&quot;images&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;hero&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// PARSED from _links data</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;seals&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;hero&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="s2">&quot;nesting&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;parents&quot;</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>                <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="cm">/*{ &quot;id&quot;: &quot;12638&quot; },...*/</span> <span class="p">],</span>
</span><span class='line'>                <span class="s2">&quot;siblings&quot;</span><span class="o">:</span> <span class="p">[]</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">urlRoot</span><span class="o">:</span> <span class="s2">&quot;/v4/events&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">parse</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">try</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">images</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">_links</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nx">data</span><span class="p">.</span><span class="nx">images</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>                        <span class="nx">hero</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">_links</span><span class="p">[</span><span class="s2">&quot;http://hautelook.com/rels/images/event-hero&quot;</span><span class="p">].</span><span class="nx">href</span>
</span><span class='line'>                    <span class="p">};</span>
</span><span class='line'>                    <span class="nx">data</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">hero</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">hero</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;event-small&quot;</span><span class="p">,</span> <span class="s2">&quot;event-large&quot;</span><span class="p">);</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">Event</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example of Backbone.js Collection definition using AMD</h3>

<p>The events collection defined below returns an instance of the Backbone Collection object. In this collection constructor &#8220;EventsCollection&#8221; the event model is assigned to the model property of the object literal used to extend the base collection object (pseudo class, as in JavaScript everything is an object). Notice that one of the required scripts is &#8220;models&#8221; which contains the &#8220;Event&#8221; constructor in an object which is referenced as the variable &#8220;models.Event&#8221;.</p>

<figure class='code'><figcaption><span>Events Collection  (events-example.js)</span> <a href='/downloads/code/javascript/collections/events-example.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Events Collection  </span>
</span><span class='line'><span class="c1">// -----------------</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// @requires `define`  </span>
</span><span class='line'><span class="c1">// @return {BaseCollection} EventsCollection instance</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;underscore&#39;</span><span class="p">,</span><span class="s1">&#39;models&#39;</span><span class="p">,</span><span class="s1">&#39;collections/base&#39;</span><span class="p">,</span><span class="s1">&#39;utils/debug&#39;</span><span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span>      <span class="nx">_</span><span class="p">,</span>           <span class="nx">models</span><span class="p">,</span>  <span class="nx">BaseCollection</span><span class="p">,</span>    <span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">EventsCollection</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">eventsModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">models</span><span class="p">.</span><span class="nx">EventsData</span><span class="p">(),</span>
</span><span class='line'>        <span class="nx">Event</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">Event</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">EventsCollection</span> <span class="o">=</span> <span class="nx">BaseCollection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">model</span><span class="o">:</span> <span class="nx">Event</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">models</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nx">EventsCollection</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the code above there is a <em>single var</em> statement which lists the local variables in the current scope. This is a best practice and encouraged so the developers have a common place to find the local variables for this module. Also it provide some syntax to how the code dependencies are used at the top of the module. For example the <em>eventsModel</em> is a new instance of the required <em>EventsData</em> constructor and <em>Event</em> is the constructor included in the required <em>models</em> object.</p>

<blockquote><p><em>The previous code examples that the objects used to extend when defining the constructors are : BaseModel and BaseCollection not Backbone.Model and Backbone.Collection. We are using base classes so that they may be extended similar to the use of an abstract class.</em></p></blockquote>

<h3>Grouping objects simplifies dependency management and also facilitates an organized build</h3>

<p>The strategy we are using for authoring modular and reusable code includes the use of site-wide or <em>global</em> objects as well as code organized in <em>packages</em> intended for specific components of the application. To provide global objects as dependencies which will be required by various packages we group (or wrap) common types of objects into a single object which can be <a href="http://requirejs.org/docs/optimization.html" title="RequireJS optimization/build script: r.js">optimized</a> in the build process with r.js. Grouping objects also helps to keep your list (array) of dependencies in the first argument of the (RequireJS) global <strong>define</strong> function call much cleaner and concise.</p>

<figure class='code'><figcaption><span>models  (models.js)</span> <a href='/downloads/code/javascript/models.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// List of models  </span>
</span><span class='line'><span class="c1">// --------------</span>
</span><span class='line'><span class="c1">// Models in this directory are intended for site-wide usage  </span>
</span><span class='line'>
</span><span class='line'><span class="c1">// This module is used with the r.js optimizer tool during build  </span>
</span><span class='line'><span class="c1">// See http://requirejs.org/docs/faq-optimization.html</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Requires `define`  See &lt;http://requirejs.org/docs/api.html#define&gt;  </span>
</span><span class='line'><span class="c1">// Returns {Object} model constructor references</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span>
</span><span class='line'>        <span class="s2">&quot;models/application-state&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;models/base&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;models/event&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;models/member-summary&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;models/messaging&quot;</span>
</span><span class='line'>        <span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span>
</span><span class='line'>        <span class="nx">ApplicationStateModel</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">BaseModel</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">EventModel</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">MemberSummaryModel</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">MessagingModel</span>
</span><span class='line'>        <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Add models in this same directory to this object, </span>
</span><span class='line'>    <span class="c1">// for use when requiring this module.</span>
</span><span class='line'>    <span class="c1">// grouping site-wide models in this module (object)</span>
</span><span class='line'>    <span class="c1">// optimizes the performance and keeps dependencies organized</span>
</span><span class='line'>    <span class="c1">// when the (build) optimizer is run.</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;ApplicationStateModel&quot;</span><span class="o">:</span> <span class="nx">ApplicationStateModel</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;BaseModel&quot;</span><span class="o">:</span> <span class="nx">BaseModel</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;EventModel&quot;</span><span class="o">:</span> <span class="nx">EventModel</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;MemberSummaryModel&quot;</span><span class="o">:</span> <span class="nx">MemberSummaryModel</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;MessagingModel&quot;</span><span class="o">:</span> <span class="nx">MessagingModel</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Wrapper: Utils Library</h4>

<p>Another example of grouping objects for a base library used to extend our base objects e.g. BaseModel&#8230;</p>

<figure class='code'><figcaption><span>utils  (utils.js)</span> <a href='/downloads/code/javascript/utils.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// List of utility libraries</span>
</span><span class='line'><span class="c1">// -------------------------</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// this module is used with the r.js optimizer tool during build  </span>
</span><span class='line'><span class="c1">// See http://requirejs.org/docs/faq-optimization.html</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Requires `define` see &lt;http://requirejs.org/docs/api.html#define&gt;  </span>
</span><span class='line'><span class="c1">// Returns {Object} reference to utiltiy modules</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span>
</span><span class='line'>       <span class="s2">&quot;utils/ajax-options&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/baselib&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/cookies&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/storage&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/debug&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/date&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="s2">&quot;utils/shims&quot;</span>
</span><span class='line'>        <span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span>
</span><span class='line'>        <span class="nx">ajaxOptions</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">baselib</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">docCookies</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">storage</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">debug</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">parseDate</span>
</span><span class='line'>        <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;ajaxOptions&quot;</span><span class="o">:</span> <span class="nx">ajaxOptions</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;baselib&quot;</span><span class="o">:</span> <span class="nx">baselib</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;docCookies&quot;</span><span class="o">:</span> <span class="nx">docCookies</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;storage&quot;</span><span class="o">:</span> <span class="nx">storage</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="nx">debug</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;parseDate&quot;</span><span class="o">:</span> <span class="nx">parseDate</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="c1">// the shim only extend JavaScript when needed, e.g. Object.create</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Events Collection</h4>

<p>The events collection object can be <em>extended</em> to further segment the collection for specific lists presented to site visitors. In the example below the required script <em>&#8216;collections/events&#8217;</em> returns an instance, however the instance&#8217;s constructor is easily referenced like so <em>eventsCollection.constructor</em> and extended to create a new constructor which will have methods to filter the collection by segment.</p>

<h4>Events Segments Collection</h4>

<figure class='code'><figcaption><span>Events Segments Collection  (events-segments-example.js)</span> <a href='/downloads/code/javascript/collections/events-segments-example.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Events Segments Collection  </span>
</span><span class='line'><span class="c1">// -----------------</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// @requires `define`  </span>
</span><span class='line'><span class="c1">// @return {Array} `segments` multi-dimensional array[schedule][type] </span>
</span><span class='line'><span class="c1">// with collection {EventsSegmentCollection} instances</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;underscore&#39;</span><span class="p">,</span><span class="s1">&#39;collections/events&#39;</span><span class="p">,</span><span class="s1">&#39;utils/baselib&#39;</span><span class="p">,</span><span class="s1">&#39;utils/debug&#39;</span><span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span>      <span class="nx">_</span><span class="p">,</span>           <span class="nx">eventsCollection</span><span class="p">,</span>    <span class="nx">baselib</span><span class="p">,</span>        <span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">EventsSegmentCollection</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">schedules</span><span class="p">,</span> <span class="nx">segments</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Subclass for creating specific segments of a collection</span>
</span><span class='line'>    <span class="nx">EventsSegmentCollection</span> <span class="o">=</span> <span class="nx">eventsCollection</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">model</span><span class="o">:</span> <span class="nx">eventsCollection</span><span class="p">.</span><span class="nx">model</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// Methods to filter collection and match schedule and/or type</span>
</span><span class='line'>        <span class="nx">selectFilters</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">collection</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">models</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// ... </span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span> <span class="nx">models</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Create segmented collections from the events collection</span>
</span><span class='line'>    <span class="nx">schedules</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;today&#39;</span><span class="p">,</span> <span class="s1">&#39;ending_soon&#39;</span> <span class="cm">/*, &#39;upcoming&#39; */</span> <span class="p">];</span>
</span><span class='line'>    <span class="nx">types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Beauty&#39;</span><span class="p">,</span> <span class="s1">&#39;Getaways&#39;</span><span class="p">,</span> <span class="s1">&#39;Home&#39;</span><span class="p">,</span> <span class="s1">&#39;Kids&#39;</span><span class="p">,</span> <span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="s1">&#39;All&#39;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// segments are combinations of schedules and types, e.g. `today` and `Beauty`</span>
</span><span class='line'>    <span class="nx">segments</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// iterate over schedules and types to build new collections by segments</span>
</span><span class='line'>    <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">schedules</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">schedule</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">segments</span><span class="p">[</span><span class="nx">schedule</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>        <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">types</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">segments</span><span class="p">[</span><span class="nx">schedule</span><span class="p">][</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventsSegmentCollection</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>                <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
</span><span class='line'>                <span class="s2">&quot;schedule&quot;</span> <span class="o">:</span> <span class="nx">schedule</span>
</span><span class='line'>            <span class="p">});</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">segments</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The truncated module above returns a multi-dimensional &#8220;array[schedule][type]&#8221; using the extended constructor. This module is useful throughout the application where ever segments of the events are listed and presented in various formats whether in a menu, list or as graphic slides the data is common and already segmented as required for the business of the application.</p>

<h3>Defining a module with non-JavaScript dependencies like a Mustache html template</h3>

<p>The view module below needs an HTML template file written for use with the template library Mustache. The required template <code>'text!packages/header/templates/nav.html'</code> has the prefix <code>text!</code> which is a <a href="http://requirejs.org/docs/download.html#plugins" title="RequireJS text! plugin">plugin</a> to the RequireJS library.</p>

<ul>
<li><a href="http://mustache.github.com/" title="Mustache library">Mustache</a></li>
<li><a href="https://github.com/janl/mustache.js" title="Mustache.js source code and documentation on github">mustache.js source</a></li>
</ul>


<figure class='code'><figcaption><span>header nav view  (nav.js)</span> <a href='/downloads/code/javascript/packages/header/views/nav.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// header nav view </span>
</span><span class='line'><span class="c1">// ---------------</span>
</span><span class='line'><span class="c1">// @requires define</span>
</span><span class='line'><span class="c1">// @return {NavView} view constructor object</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;underscore&#39;</span><span class="p">,</span><span class="s1">&#39;views/base&#39;</span><span class="p">,</span><span class="s1">&#39;text!packages/header/templates/nav.html&#39;</span><span class="p">,</span><span class="s1">&#39;mustache&#39;</span><span class="p">,</span><span class="s1">&#39;utils/debug&#39;</span><span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span>      <span class="nx">_</span><span class="p">,</span>           <span class="nx">BaseView</span><span class="p">,</span>    <span class="nx">navTemplate</span><span class="p">,</span>                              <span class="nx">Mustache</span><span class="p">,</span>  <span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// global header view</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">NavView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">NavView</span> <span class="o">=</span> <span class="nx">BaseView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;navView init&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="nx">navTemplate</span><span class="p">;</span>
</span><span class='line'>            <span class="nx">NavView</span><span class="p">.</span><span class="nx">__super__</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// ...</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">NavView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>Functions require() and define() on the head object (window) are created by the <a href="http://requirejs.org/" title="RequireJS site">RequireJS library</a> and are strategic in authoring modular and reusable code. The function <strong>require()</strong> is used in the main.js to kick off the application; main.js is referenced in our html file in a script object or could be using in an inline script as well. The call to require() has as the first argument an array of the required scripts which are referenced in the second argument&#8217;s anonymous function definition which is used as a callback. When the requirements are ready they are passed to the function which lists the arguments by name giving reference to the returned objects of each required script. The <strong>define()</strong> function works the same way as require() using an array as the list of dependencies; however define() is called to <em>define</em> a module of code. the RequireJS library also has plugins to load non-JavaScript dependencies, e.g. Mustache template files, to reference the plugin use the prefix <em>text!</em>. All scripts in the Web application framework should use these two methods which provide the closures and scope for authoring modular code in JavaScript; it is not necessary to add any properties to the head (window) object.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bill Heaton</span></span>

      








  


<time datetime="2012-01-08T15:11:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/notes/categories/amd/'>AMD</a>, <a class='category' href='/notes/categories/backbone-js/'>Backbone.js</a>, <a class='category' href='/notes/categories/requirejs/'>RequireJS</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/notes/backbone-dot-js-list-of-best-practices/2012/01/07/" title="Previous Post: Backbone.js : list of best practices">&laquo; Backbone.js : list of best practices</a>
      
      
        <a class="basic-alignment right" href="/notes/file-organization-building-a-framework-using-requirejs/2012/01/08/" title="next Post: File organization: building a framework using RequireJS">File organization: building a framework using RequireJS &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/notes/vertebrae-front-end-framework-built-with-backbone-dot-js-and-requirejs-using-amd/2012/05/23/">Vertebrae front-end framework built with Backbone.js and RequireJS using AMD</a>
      </li>
    
      <li class="post">
        <a href="/notes/hello-world-code-demo-using-layout-manager-and-controller/2012/04/30/">Hello World Code Demo using Layout Manager and Controller</a>
      </li>
    
      <li class="post">
        <a href="/notes/optimize-and-build-a-backbone-dot-js-javascript-application-with-require-dot-js-using-packages/2012/01/09/">Optimize and Build a Backbone.js JavaScript application with Require.JS using Packages</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-collectionview-to-utilize-a-collection-rather-than-a-model/2012/01/09/">Backbone.js CollectionView to utilize a collection rather than a model</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-and-mustache-dot-js-small-views-and-templates/2012/01/09/">Backbone.js and Mustache.js: Small views and templates</a>
      </li>
    
      <li class="post">
        <a href="/notes/base-classes-with-custom-library-functions-added-to-backbone-dot-js-constructors/2012/01/09/">Base classes with custom library functions added to Backbone.js constructors</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-views-using-mustache-templates/2012/01/08/">Backbone Views using Mustache Templates</a>
      </li>
    
      <li class="post">
        <a href="/notes/file-organization-building-a-framework-using-requirejs/2012/01/08/">File organization: building a framework using RequireJS</a>
      </li>
    
      <li class="post">
        <a href="/notes/dependencies-managed-with-require-and-define/2012/01/08/">Dependencies managed with require() and define()</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-list-of-best-practices/2012/01/07/">Backbone.js : list of best practices</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/hautelook">@hautelook</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hautelook',
            count: 20,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("hautelook", 10, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/hautelook" class="twitter-follow-button" data-show-count="false">Follow @hautelook</a>
  
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Bill Heaton -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
