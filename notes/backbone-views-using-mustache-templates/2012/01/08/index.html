
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Backbone Views using Mustache Templates - Vertebrae framework</title>
  <meta name="author" content="Bill Heaton">

  
  <meta name="description" content="Using Mustache.js Mustache is a template library based on logic-less templates and the JavaScript implementation can be executed on the client side. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pixelhandler.github.com/vertebrae http://pixelhandler.github.com/vertebrae/notes/backbone-views-using-mustache-templates/2012/01/08">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Vertebrae framework" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Vertebrae framework</a></h1>
  
    <h2>built with Backbone.js and RequireJS using AMD</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pixelhandler.github.com/vertebrae pixelhandler.github.com/vertebrae" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Backbone Views Using Mustache Templates</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-08T23:35:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Using Mustache.js</h2>

<p>Mustache is a template library based on logic-less templates and the JavaScript implementation can be executed on the client side. The basic usage takes two components:</p>

<ol>
<li>An HTML template with variables embedded inside double curly braces, e.g. <em>&lt;p&gt;&#123;&#123;myVar&#125;&#125;&lt;/p&gt;</em></li>
<li>A JSON object with data containing the named object referenced in the template e.g. <em>{ &#8220;myVar&#8221; : &#8220;Sting value here&#8221; }</em>.</li>
</ol>


<p>The <a href="https://github.com/janl/mustache.js" title="Mustache.js source code and documentation on github">Mustache.js</a> api provides a method <code>Mustache.to_html()</code> which compiles the template code with the JSON object to produce a string to insert into the DOM. For example: <code>rendered = Mustache.to_html(view.template, view.model.toJSON());</code></p>

<h2>Simple template used to render a list item</h2>

<p>This example will be used by a Backbone View object&#8217;s render method which will be used within a CollectionView object with the responsibility of building views from a Backbone collection object</p>

<figure class='code'><figcaption><span> (event.html)</span> <a href='/downloads/code/javascript/packages/header/templates/event.html'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/event/{{event_code}}&quot;</span> <span class="na">data-sort=</span><span class="s">&quot;{{sort_order}}&quot;</span><span class="nt">&gt;</span>{{title}}<span class="nt">&lt;/a&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>JSON Data: Event object</h2>

<p>The data below includes the variables (<em>event_code</em>, <em>sort_order</em>, <em>title</em>) referenced in the the template and other data not utilized in the template.</p>

<figure class='code'><figcaption><span> (event-object.json)</span> <a href='/downloads/code/json/event-object.json'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;event_id&quot;</span><span class="o">:</span> <span class="s2">&quot;12366&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;event_code&quot;</span><span class="o">:</span> <span class="s2">&quot;12366stellaandjamiewc&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;start_date&quot;</span><span class="o">:</span> <span class="s2">&quot;2011-12-28T08:00:00-08:00&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;end_date&quot;</span><span class="o">:</span> <span class="s2">&quot;2011-12-30T08:00:00-08:00&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;image_url&quot;</span><span class="o">:</span> <span class="s2">&quot;/assets/12366stellaandjamiewc/event-small.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;info&quot;</span><span class="o">:</span> <span class="s2">&quot;/assets/12366stellaandjamiewc/info.txt&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;video&quot;</span><span class="o">:</span> <span class="s2">&quot;/assets/12366stellaandjamiewc/video.mp4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Stella &amp; jamie&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;tagline&quot;</span><span class="o">:</span> <span class="s2">&quot;Sequins and detailing that dress things up&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;event_types&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Women&quot;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="s2">&quot;meta&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;msa&quot;</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>        <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;Active&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;private_event&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;exclusive&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;preview&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;nested&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s2">&quot;parents&quot;</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>            <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">[],</span>
</span><span class='line'>            <span class="s2">&quot;siblings&quot;</span><span class="o">:</span> <span class="p">[]</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Sequins and detailing that dress things up.&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;coa&quot;</span><span class="o">:</span> <span class="s2">&quot;womens_apparel&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;sort_order&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;category&quot;</span><span class="o">:</span> <span class="s2">&quot;Accessories&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;event_display_format&quot;</span><span class="o">:</span> <span class="s2">&quot;Regular&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Backbone View in a AMD module utilizing Mustache within it&#8217;s render() method</h2>

<p>The module requires a text/html file by including a string in the dependencies array : <code>'text!packages/header/templates/event.html'</code> and assigns the text string to the variable listed in the anonymous function&#8217;s arguments named: <code>eventTemplate</code>. The JSON data is injected when this view constructor is initialized by calling the construction function with the &#8220;new&#8221; operator and passing in the JSON object as the model data, e.g. <code>"model" : new EventView(model),</code></p>

<p>The code <code>rendered = Mustache.to_html(view.template, view.model.toJSON());</code> has a (string) template as the first argument and the second argument is the JSON data object. The result of this <code>to_html</code> method is assigned to the variable <code>rendered</code>. Then the view instance&#8217;s &#8220;render()&#8221; method inserts the rendered html into the DOM reference by the Backbone View object&#8217;s &#8220;el&#8221; property&#8230; <code>$(view.el).html(rendered);</code></p>

<figure class='code'><figcaption><span> (event.js)</span> <a href='/downloads/code/javascript/packages/header/views/event.js'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// event view </span>
</span><span class='line'><span class="c1">// ----------</span>
</span><span class='line'><span class="c1">// @requires define</span>
</span><span class='line'>
</span><span class='line'><span class="nx">define</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;underscore&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;backbone&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;views/base&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;text!packages/header/templates/event.html&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;mustache&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;utils/debug&#39;</span><span class="p">],</span>
</span><span class='line'><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">Backbone</span><span class="p">,</span> <span class="nx">BaseView</span><span class="p">,</span> <span class="nx">eventTemplate</span><span class="p">,</span> <span class="nx">Mustache</span><span class="p">,</span> <span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">EventView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">EventView</span> <span class="o">=</span> <span class="nx">BaseView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="nx">eventTemplate</span><span class="p">;</span>
</span><span class='line'>            <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;EventView init&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">rendered</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="nx">rendered</span> <span class="o">=</span> <span class="nx">Mustache</span><span class="p">.</span><span class="nx">to_html</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">template</span><span class="p">,</span> <span class="nx">view</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">());</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">rendered</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;EventView rendered&#39;</span><span class="p">);</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">view</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">EventView</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>Mustache.js is the template library selected primarily because of the fact that the library is &#8220;logic-less&#8221; and also is a popular choice since <a href="http://mustache.github.com/" title="Mustache library">Mustache</a> is implemmented in a wide variety of languages. The fact that no logic is executed in rendering a Mustache template insures that bugs are highly unlikely to be caused due to some logic failing within the operation of executing the template method to render an object as HTML. Logic can be added to the Mustache template within the JavaScript code (e.g. a module for creating a View constructor) which allows for unit testing and debugging utilizing a breakpoint in the code. See the <a href="https://github.com/janl/mustache.js" title="Mustache.js source code and documentation on github">Mustache.js documentation</a> for using conditions, enumerable objects, partials an other Mustache interface functions to for authoring templates with JavaScript, HTML and JSON.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bill Heaton</span></span>

      








  


<time datetime="2012-01-08T23:35:00-08:00" pubdate data-updated="true">Jan 8<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/notes/categories/backbone-js/'>Backbone.js</a>, <a class='category' href='/notes/categories/mustache-js/'>Mustache.js</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/notes/file-organization-building-a-framework-using-requirejs/2012/01/08/" title="Previous Post: File organization: building a framework using RequireJS">&laquo; File organization: building a framework using RequireJS</a>
      
      
        <a class="basic-alignment right" href="/notes/base-classes-with-custom-library-functions-added-to-backbone-dot-js-constructors/2012/01/09/" title="next Post: Base classes with custom library functions added to Backbone.js constructors">Base classes with custom library functions added to Backbone.js constructors &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/notes/vertebrae-front-end-framework-built-with-backbone-dot-js-and-requirejs-using-amd/2012/05/23/">Vertebrae front-end framework built with Backbone.js and RequireJS using AMD</a>
      </li>
    
      <li class="post">
        <a href="/notes/hello-world-code-demo-using-layout-manager-and-controller/2012/04/30/">Hello World Code Demo using Layout Manager and Controller</a>
      </li>
    
      <li class="post">
        <a href="/notes/optimize-and-build-a-backbone-dot-js-javascript-application-with-require-dot-js-using-packages/2012/01/09/">Optimize and Build a Backbone.js JavaScript application with Require.JS using Packages</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-collectionview-to-utilize-a-collection-rather-than-a-model/2012/01/09/">Backbone.js CollectionView to utilize a collection rather than a model</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-and-mustache-dot-js-small-views-and-templates/2012/01/09/">Backbone.js and Mustache.js: Small views and templates</a>
      </li>
    
      <li class="post">
        <a href="/notes/base-classes-with-custom-library-functions-added-to-backbone-dot-js-constructors/2012/01/09/">Base classes with custom library functions added to Backbone.js constructors</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-views-using-mustache-templates/2012/01/08/">Backbone Views using Mustache Templates</a>
      </li>
    
      <li class="post">
        <a href="/notes/file-organization-building-a-framework-using-requirejs/2012/01/08/">File organization: building a framework using RequireJS</a>
      </li>
    
      <li class="post">
        <a href="/notes/dependencies-managed-with-require-and-define/2012/01/08/">Dependencies managed with require() and define()</a>
      </li>
    
      <li class="post">
        <a href="/notes/backbone-dot-js-list-of-best-practices/2012/01/07/">Backbone.js : list of best practices</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/hautelook">@hautelook</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hautelook',
            count: 20,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("hautelook", 10, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/hautelook" class="twitter-follow-button" data-show-count="false">Follow @hautelook</a>
  
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Bill Heaton -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
